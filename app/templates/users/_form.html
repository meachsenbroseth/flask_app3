{{ form.hidden_tag() }}

<div class="card shadow-sm p-4">

    <!-- USERNAME -->
    <div class="mb-3">
        {{ form.username.label(class="form-label fw-bold") }}
        {{ form.username(class="form-control") }}
        {% if form.username.errors %}
        <div class="text-danger small">
            {% for err in form.username.errors %}<div>{{ err }}</div>{% endfor %}
        </div>
        {% endif %}
    </div>

    <!-- EMAIL -->
    <div class="mb-3">
        {{ form.email.label(class="form-label fw-bold") }}
        {{ form.email(class="form-control") }}
        {% if form.email.errors %}
        <div class="text-danger small">
            {% for err in form.email.errors %}<div>{{ err }}</div>{% endfor %}
        </div>
        {% endif %}
    </div>

    <!-- FULL NAME -->
    <div class="mb-3">
        {{ form.full_name.label(class="form-label fw-bold") }}
        {{ form.full_name(class="form-control") }}
        {% if form.full_name.errors %}
        <div class="text-danger small">
            {% for err in form.full_name.errors %}<div>{{ err }}</div>{% endfor %}
        </div>
        {% endif %}
    </div>

    <!-- ACTIVE STATUS -->
    <div class="form-check mb-3">
        {{ form.is_active(class="form-check-input") }}
        {{ form.is_active.label(class="form-check-label fw-bold") }}
    </div>

    <!-- PASSWORD (for create or optional edit) -->
    <div class="mb-3">
        {{ form.password.label(class="form-label fw-bold") }}
        {{ form.password(class="form-control") }}
        {% if form.password.errors %}
        <div class="text-danger small">
            {% for err in form.password.errors %}<div>{{ err }}</div>{% endfor %}
        </div>
        {% endif %}
    </div>

    <div class="mb-3">
        {{ form.confirm_password.label(class="form-label fw-bold") }}
        {{ form.confirm_password(class="form-control") }}
        {% if form.confirm_password.errors %}
        <div class="text-danger small">
            {% for err in form.confirm_password.errors %}<div>{{ err }}</div>{% endfor %}
        </div>
        {% endif %}
    </div>

    <!-- ROLES SECTION -->
   <div class="mb-3">
    <label class="form-label fw-bold">Roles</label>

    <select name="roles" class="form-select">
        {% for value, label in form.roles.choices %}
            <option value="{{ value }}"
                {% if form.roles.data == value %}selected{% endif %}
            >
                {{ label }}
            </option>
        {% endfor %}
    </select>

    {% if form.roles.errors %}
    <div class="text-danger small">
        {% for err in form.roles.errors %}
            <div>{{ err }}</div>
        {% endfor %}
    </div>
    {% endif %}
</div>

    <!-- BUTTONS -->
    <div class="d-flex justify-content-between mt-4">
        <button class="btn btn-primary">{{ form.submit.label.text or "Save" }}</button>

        <a href="{{ url_for('users.index') }}" class="btn btn-secondary">
            Cancel
        </a>
    </div>

</div>
